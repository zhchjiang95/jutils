{"version":3,"file":"index.js","sources":["../src/formatDate.ts","../src/throttleFn.ts","../src/adaptiveScaling.ts","../src/boxAnchor.ts","../src/canvasPathEvent.ts","../src/createCanvas.ts","../src/debounceFn.ts","../src/filterTree.ts","../src/formatUrlSearch.ts","../src/infiniteScroll.ts","../src/matchString.ts","../src/pageAnchor.ts","../src/slideDirection.ts"],"sourcesContent":["/**\n * 格式化当前或自定义时间日期，自定义年月日分隔符和时分秒显示\n * @param opts sep: 年月日分隔符; millisecond: 自定义时间（毫秒）或Date(); showHours: 是否显示时分秒。默认：false\n * @returns string\n * @example\n * ```js\n * formatTime({sep: '-', millisecond: Date.now() + 20, showHours: true}) // 2020-08-24 15:06:32\n * ```\n */\nconst formatDate = (opts?: {\n  sep?: string;\n  millisecond?: string | number;\n  showHours?: boolean;\n}) => {\n  const separator = opts?.sep || \"-\";\n  const hasHours = opts?.showHours || false;\n  let dateTimer = opts?.millisecond\n    ? new Date(Number(opts.millisecond))\n    : new Date();\n  let Y: number | string = dateTimer.getFullYear();\n  let M: number | string = dateTimer.getMonth() + 1;\n  let D: number | string = dateTimer.getDate();\n  let h: number | string = dateTimer.getHours();\n  let m: number | string = dateTimer.getMinutes();\n  let s: number | string = dateTimer.getSeconds();\n  M = M >= 10 ? M : \"0\" + M;\n  D = D >= 10 ? D : \"0\" + D;\n  h = h >= 10 ? h : \"0\" + h;\n  m = m >= 10 ? m : \"0\" + m;\n  s = s >= 10 ? s : \"0\" + s;\n\n  return hasHours\n    ? `${Y + separator + M + separator + D} ${h}:${m}:${s}`\n    : `${Y + separator + M + separator + D}`;\n};\n\nexport default formatDate;\n","/**\n * 节流函数，在连续的函数触发过程限制执行次数\n * @param fn 在毫秒（ms）后要执行的函数\n * @param ms 延迟毫秒数，默认 200\n * @param trailing 节流过程中最后一次自动执行，默认为 false\n * @returns A new, throttled, function.\n * @example\n * ```js\n *  document.addEventListener('mousemove', jutils.throttleFn(() => {\n      console.log(333);\n    }, 1000, true))\n * ```\n */\nconst throttleFn = <T extends Function>(\n  fn: T,\n  ms: number = 200,\n  trailing: boolean = false\n): ((e: Event) => void) => {\n  let flag = true;\n  return (e) => {\n    if (flag) {\n      flag = false;\n      setTimeout(() => {\n        flag = true;\n        if (trailing) {\n          setTimeout(() => {\n            if (flag) {\n              fn(e);\n            }\n          }, 10);\n        }\n      }, ms);\n      fn(e);\n    }\n  };\n};\n\nexport default throttleFn;\n","/**\n * 自适应等比缩放。适用大屏可视化自动适配屏幕\n * @param targetEl 需要去适应的（父级）盒子, 将元素等比例缩放撑满盒子（进入全屏状态的元素应该是父级盒子）。\n * @param sourceEl 需要被缩放的元素，它会自适应父级盒子。\n * @param designSize 设计稿尺寸，如：1920x1080，则传入[1920,1080]。\n * @example\n * ```js\n * adaptiveScaling(HTMLElement, HTMLElement, [1920, 1080])\n * ```\n */\nconst adaptiveScaling = (\n  targetEl: HTMLElement,\n  sourceEl: HTMLElement,\n  designSize: number[]\n) => {\n  const [designW, designH] = designSize;\n  const targetWidth = targetEl.clientWidth;\n  // const targetHeight = targetEl.clientHeight;\n  // 盒子尺寸比\n  // const realRatio = targetWidth / targetHeight;\n  // 设计稿比例\n  // const designRatio = designW / designH;\n  // 缩放率\n  let scaleRate = targetWidth / designW;\n  // 如果是竖屏，按高缩放\n  // if (realRatio.toFixed(1) > designRatio.toFixed(1)) {\n  //   scaleRate = targetHeight / designH;\n  // }\n  sourceEl.style.transformOrigin = \"left top\";\n  sourceEl.style.transform = `scale(${scaleRate})`;\n  // sourceEl.style.width = `${targetWidth / scaleRate}px`;\n};\n\nexport default adaptiveScaling;\n","/**\n * 盒子锚点，在任意可滑动盒子中跳转；监听事件元素需指定 data-jt-id 值为目标元素唯一标识 id\n * @param options\n * 1、source：监听点击事件元素（或其父级）选择器，请确保唯一(①选择器带元素名（如：button#search）则监听其内部最深层的元素（理论情况，既实际点击到的元素），该元素须添加 data-jt-id 属性，属性值为目标容器内目标对象的 id（该目标对象须指定 data-jt-type 的值为 'jt'，以配合 callback 工作）。②选择器不带元素名（如：#search）则只监听此元素点击事件，data-jt-id 属性须绑定在此元素上。)；\n * 2、target：目标可滚动容器的选择器，请确保唯一，容器内的目标对象 id 值为对应的 data-jt-id 值（该目标对象须指定 data-jt-type 的值为 'jt'，以配合 callback 工作）；\n * 3、diff：滑动到与父元素的顶部距离差，默认值：4；\n * 4、speed：滑动速度，默认值：20。\n * @param callback 指定回调函数后，函数将在滚动过程定点执行，函数参数默认返回一个对象，包含此时在可视屏幕内指定 data-jt-id 属性的元素和该元素的 data-jt-id 属性值（须目标容器中目标对象指定 data-jt-type 的值为 'jt'）。\n * @example\n * ```js\n * <div id=\"source-box\"><a data-jt-id=\"h1\">锚点到h1</a></div>\n * <div id=\"target-box\"><h4 id=\"h1\" data-jt-type=\"jt\">我的id是h1</h4></div>\n * boxAnchor({source: 'div#source-box', target: '#target-box'}, (res) => {})\n * ```\n */\nconst boxAnchor = (\n  options: { source: string; target: string; diff?: number; speed?: number },\n  callback: (res: { el: HTMLElement; jtId: string }) => void\n) => {\n  var source = document.querySelector(options.source) as HTMLElement,\n    box = document.querySelector(options.target) as HTMLElement,\n    boxChildren = Array.from(box?.children || []).filter(\n      (v: any) => v.dataset.jtType === \"jt\"\n    ),\n    V: HTMLElement,\n    arr: Element[] | null = null;\n  source.onclick = function (e) {\n    var id =\n      \"#\" +\n      (/^[.|#]/.test(options.source)\n        ? (this as HTMLElement).dataset.jtId\n        : (e.target as HTMLElement).dataset.jtId);\n    var target = document.querySelector(id) as HTMLElement;\n    if (!target) return;\n    var diff = options.diff ? options.diff : 0;\n    var speed = options.speed ? options.speed : 10;\n    var targetHeight = parseFloat(getComputedStyle(target).height);\n    var flag = box.scrollTop >= target.offsetTop - targetHeight - diff;\n    (function jMove() {\n      if (flag) {\n        if (\n          box.scrollTop > target.offsetTop - targetHeight - diff &&\n          box.scrollTop !== 0\n        ) {\n          box.scrollTo(0, box.scrollTop - speed);\n          requestAnimationFrame(jMove);\n        }\n      } else {\n        if (\n          target.offsetTop - targetHeight - diff - box.scrollTop > speed &&\n          box.scrollTop + box.offsetHeight < box.scrollHeight - speed\n        ) {\n          box.scrollTo(0, box.scrollTop + speed);\n          requestAnimationFrame(jMove);\n        }\n      }\n    })();\n    return false;\n  };\n  typeof callback === \"function\" &&\n    box.addEventListener(\"scroll\", function () {\n      boxChildren.map((v: any) => {\n        if (v !== V) {\n          V = v;\n          v.distance = Math.abs(v.offsetTop - box.scrollTop);\n        }\n      });\n      const tmp = boxChildren.sort((p: any, n: any) => p.distance - n.distance);\n      if (!arr || arr[0].id !== tmp[0].id) {\n        arr = tmp.slice();\n        callback({\n          el: tmp[0] as HTMLElement,\n          jtId: tmp[0].id,\n        });\n      }\n    });\n};\n\nexport default boxAnchor;\n","import throttleFn from \"./throttleFn\";\n\ntype EventType = \"mousemove\" | \"mouseleave\" | \"mouseover\" | \"click\";\ninterface RecordData {\n  index?: number;\n  path?: Path2D;\n  e: {\n    clientX?: number;\n    clientY?: number;\n  };\n}\n\n/**\n * canvasPath2D事件，给Canvas Path2D路径绑定事件\n * @param canvas canvas 元素\n * @param paths Path2D 数组\n * @param eventType 事件类型（\"mousemove\" | \"mouseleave\" | \"mouseover\" | \"click\"），若为数组 index,path的赋值只发生在数组的第一位事件中，其它事件仅改变样式\n * @param cb 回调函数，参数为 { index: 当前paths中的下标；path: 当前path；e: {clientX；clientY}}\n * @param opts { ms：节流时延，默认80毫秒；dpr：如果自定义了画布大小与样式大小比，则传入 }\n * @returns stop 清除监听的函数\n * @example\n * ```js\n * const canvas = document.querySelector('canvas');\n * const path1 = new Path2D();\n * const path2 = new Path2D();\n * const stop = canvasPathEvent(canvas, [path1, path2], ['mouseover', 'mousemove'], (res) => {});\n * ```\n */\nconst canvasPathEvent = (\n  canvas: HTMLCanvasElement,\n  paths: Path2D[],\n  eventType: EventType | EventType[],\n  cb: (e: RecordData) => void,\n  opt?: {\n    ms?: number;\n    dpr?: number\n  }\n) => {\n  const current: RecordData = {\n    index: undefined,\n    path: undefined,\n    e: {},\n  };\n  const isArrEvent = Array.isArray(eventType);\n  const ms = opt?.ms || 80;\n  \n  const cleanups: (() => void)[] = [];\n\n  const ctx = canvas.getContext(\"2d\");\n  if (ctx) {\n    const onSetValue = (cursor: string, i?: number, p?: Path2D) => {\n      current.index = i;\n      current.path = p;\n      canvas.style.cursor = cursor;\n    };\n\n    const onPathEvent = throttleFn((ev: MouseEvent) => {\n      const { offsetX, offsetY, clientX, clientY, type } = ev;\n      const dpr = opt?.dpr || canvas.width / canvas.clientWidth;\n      const i = paths.findIndex((p) => {\n        return ctx.isPointInPath(p, offsetX * dpr, offsetY * dpr);\n      });\n      current.e.clientX = clientX;\n      current.e.clientY = clientY;\n      if (i !== -1) {\n        if (isArrEvent) {\n          if (eventType[0] === type) {\n            onSetValue(\"pointer\", i, paths[i]);\n          } else {\n            canvas.style.cursor = \"pointer\";\n          }\n        } else {\n          onSetValue(\"pointer\", i, paths[i]);\n        }\n      } else {\n        onSetValue(\"default\");\n      }\n      cb(current);\n    }, ms);\n\n    (isArrEvent ? eventType : [eventType]).forEach((type) => {\n      canvas.addEventListener(type, onPathEvent);\n      cleanups.push(() => {\n        canvas.removeEventListener(type, onPathEvent);\n      });\n    });\n  }\n\n  const stop = () => {\n    cleanups.forEach((cleanup) => {\n      cleanup();\n    });\n  };\n  return stop;\n};\n\nexport default canvasPathEvent;\n","type CTXAttr = \"font\" | \"fillStyle\" | \"strokeStyle\" | \"lineWidth\";\n\n/**\n * 快速创建 Canvas 元素\n * @param canvas Canvas元素，不传自动创建\n * @param opts 配置对象。 width?: 画布宽，默认：200; height?: 画布高，默认：100; dpr?: 画布宽高与样式宽高比值，默认：2; attrs?: 其他属性。\"font\" | \"fillStyle\" | \"strokeStyle\" | \"lineWidth\"等属性\n * @returns HTMLCanvasElement\n * ```js\n * const canvas = createCanvas(null, { width: 200, height: 200 });\n * ```\n */\nconst createCanvas = (\n  canvas?: HTMLCanvasElement | null,\n  opts?: {\n    width?: number;\n    height?: number;\n    dpr?: number;\n    attrs?: Partial<Record<CTXAttr, string | number>>;\n  }\n) => {\n  const el = canvas || document.createElement(\"canvas\");\n  const dpr = opts?.dpr || 2;\n  const w = opts?.width || 200;\n  const h = opts?.height || 100;\n\n  el.width = w;\n  el.height = h;\n  el.style.width = w / dpr + \"px\";\n  el.style.height = h / dpr + \"px\";\n  const ctx = el.getContext(\"2d\")!;\n  ctx.font = `${13 * dpr}px system-ui`;\n  if (opts?.attrs) {\n    const o = opts?.attrs;\n    Object.keys(o).forEach((key) => {\n      ctx[key] = o[key];\n    });\n  }\n\n  return el;\n};\n\nexport default createCanvas;\n","/**\n * 防抖函数，在连续的函数触发过程执行最后一次\n * @param fn 连续触发的函数\n * @param ms 执行等待的毫秒数，默认 200\n * @param opt { maxWait: 最大等待时间，超过立即执行一次 }\n * @returns A new, debounce, function.\n * @example\n * ```js\n *  document.addEventListener('mousemove', jutils.debounceFn(() => {\n      console.log(333);\n    }, 500, { maxWait: 2000 }))\n * ```\n */\nconst debounceFn = <T extends Function>(\n  fn: T,\n  ms: number = 200,\n  opt?: { maxWait?: number }\n): ((e: Event) => void) => {\n  let timer: NodeJS.Timeout;\n  let t: number | undefined;\n  return (e) => {\n    if (t === undefined) {\n      t = new Date().getTime();\n    }\n    if (opt?.maxWait) {\n      if (t && new Date().getTime() - t > opt.maxWait) {\n        fn(e);\n        t = undefined;\n      }\n    }\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      fn(e);\n      t = undefined;\n    }, ms);\n  };\n};\n\nexport default debounceFn;\n","type FilterTreeParams<T> = {\n  childrenField?: string;\n  callback?: (arg: T) => void;\n};\n\n/**\n * 搜索过滤树。按树层级返回过滤后树数据\n * @param data 树数据，须 children 字段，可使用 childrenField 替换\n * @param searchField 需要搜索的字段\n * @param searchValue 搜索的字符串\n * @param param3 { childrenField: 子级数组不是children，可替换 children 字段，callback：回调函数，过滤的数据用来再做些什么？ }\n * @returns 过滤后树数据\n * @example\n * ```js\n * const data = [{a: 1, b: 2, children: [{a: 13, b: 14}]}];\n * // 搜索a字段，值包含3的项\n * const result = filterTree(data, 'a', '3');\n * ```\n */\nexport const filterTree = <T>(\n  data: T[],\n  searchField: string,\n  searchValue: string,\n  rest: FilterTreeParams<T>\n): T[] => {\n  const { childrenField, callback } = rest || {};\n  const children = childrenField || \"children\";\n  const searchTree = (d: any[]) => {\n    d.forEach((v) => {\n      const f = v[searchField]\n        ?.toUpperCase()\n        .includes(searchValue?.toUpperCase());\n      v.search = f;\n      if (v[children]) {\n        searchTree(v[children]);\n      }\n    });\n  };\n  const filterTree = (data: any[]) => {\n    return data.filter((v) => {\n      if (v[children]) {\n        v[children] = filterTree(v[children]);\n      }\n      const pass = v.search || v[children]?.length > 0;\n      delete v.search;\n      if (pass) callback?.(v);\n      return pass;\n    });\n  };\n  searchTree(data);\n  return filterTree(data);\n};\n\nexport default filterTree;\n","type ReturnType = Record<string, string> | string;\n/**\n * 格式化URL查询参数\n * @param key 返回某个参数值，不传返回所有参数的集合\n * @returns object | string\n */\nconst formatUrlSearch = (key?: string): ReturnType => {\n  const p = {};\n  const part = location.href.split(\"?\")[1];\n  part\n    ?.split(\"#\")[0]\n    .split(\"&\")\n    .forEach((v) => {\n      p[v.split(\"=\")[0]] = v.split(\"=\").slice(1).join(\"=\");\n    });\n  return key && key in p ? p[key] : p;\n};\n\nexport default formatUrlSearch;\n","/**\n * 滚动至底部时，加载更多数据，或执行一些自定义的事件。返回函数清除绑定\n * @param opts ①el：需要无限滚动元素的选择器，请确保唯一；②delay：节流时延，单位为ms，默认值100；③distance：触发加载的距离阈值，单位为px，默认值10。\n * @param callback 到达距离阈值时触发的事件\n * @returns unbind 返回一个可清除绑定滚动事件的函数。\n * @example\n * ```js\n * infiniteScroll({el: '.big-box', delay: 100, distance: 10 }, () => { console.log('hello') }))\n * ```\n */\nconst infiniteScroll = (\n  opts: { el: string; delay?: number; distance?: number },\n  callback: () => void\n) => {\n  var box = document.querySelector(opts.el) as HTMLElement;\n  var delay = opts.delay || 100,\n    distance = opts.distance || 10,\n    timer: NodeJS.Timeout,\n    flag = true;\n  var unbind = () => {\n    box.onscroll = null;\n  };\n  box.onscroll = function () {\n    if (flag) {\n      var boxHeight = parseFloat(getComputedStyle(box).height),\n        boxScrollHeight = box.scrollHeight,\n        boxScrollTop = box.scrollTop;\n      flag = false;\n      timer = setTimeout(function () {\n        flag = true;\n      }, delay);\n      if (boxScrollHeight - boxScrollTop - boxHeight < distance) {\n        callback();\n      }\n    }\n  };\n  return unbind;\n};\n\nexport default infiniteScroll;\n","/**\n * 字符串中匹配字符，匹配出的字符可用于高亮显示等\n * @param string 字符串\n * @param matchString 需要匹配的字符\n * @returns 返回对象包含两个参数，及匹配的结果数组，结果中匹配到的使用undefined占位，自行循环渲染使用matchString值替换undefined即可\n * @example\n * ```js\n * const res = jutils.matchString('1234422243', '2')\n * ```\n */\nconst matchString = (string: string, matchString: string) => {\n  let record = matchString;\n  // 只处理全大/小写情况\n  if (!string.includes(record)) {\n    record = record.toUpperCase();\n  }\n  const arr = string.split(record);\n  let len = arr.length - 1;\n  let result: (string | undefined)[] = [];\n  if (!arr.includes(\"\")) {\n    // 查询字符在字符串中，使用undefined占位\n    arr.forEach((v, i) => {\n      if (i === len) {\n        result.push(v);\n      } else {\n        result.push(v, undefined);\n      }\n    });\n  } else {\n    // 查询字符在字符串首尾\n    if (arr.every((v) => v === \"\")) {\n      // 被完整匹配\n      // 被全匹配\n      result = arr.length === 2 ? [\"\"] : arr.slice(1);\n    } else {\n      // 未被全匹配\n      // 在首尾匹配，且之中也包含\n      if (arr.length > 1) {\n        // 查询字符在字符串中，使用undefined占位\n        arr.forEach((v, i) => {\n          if (v) {\n            if (i === len) {\n              result.push(v);\n            } else {\n              result.push(v, undefined);\n            }\n          } else {\n            if (i !== len) {\n              result.push(undefined);\n            }\n          }\n        });\n      } else {\n        result = arr;\n      }\n    }\n  }\n\n  return {\n    string,\n    matchString,\n    result,\n  };\n};\n\nexport default matchString;\n","/**\n * 指定页面滑动到某个位置，自定义滑动速度/滑动方向。须整个页面可滑动\n * @param opts anchor：滑动到的目标位置；speed：滑动速度；down：向下滑动？向下（true）/向上（false），默认：true\n * @example\n * ```js\n * pageAnchor(100, 10, true)\n * ```\n */\nconst pageAnchor = (opts?: {\n  anchor?: number;\n  speed?: number;\n  down?: boolean;\n}) => {\n  var anchor = opts?.anchor || 0,\n    speed = opts?.speed || 10,\n    down = opts?.down === undefined ? true : Boolean(opts.down);\n  (function foo() {\n    if (down) {\n      if (scrollY < anchor) {\n        var scrollTop =\n            document.documentElement.scrollTop || document.body.scrollTop,\n          clientHeight =\n            document.documentElement.clientHeight || document.body.clientHeight,\n          scrollHeight =\n            document.documentElement.scrollHeight || document.body.scrollHeight;\n        if (\n          scrollHeight > clientHeight &&\n          scrollTop + clientHeight < scrollHeight\n        ) {\n          scrollTo(0, scrollY + speed);\n          requestAnimationFrame(foo);\n        }\n      }\n    } else {\n      if (scrollY > anchor) {\n        scrollTo(0, scrollY - speed);\n        requestAnimationFrame(foo);\n      }\n    }\n  })();\n};\n\nexport default pageAnchor;\n","interface CallBack {\n  (\n    dir: {\n      startX?: number;\n      startY?: number;\n      endX?: number;\n      endY?: number;\n    },\n    real: {\n      realX?: number;\n      realY?: number;\n    }\n  ): void;\n}\n/**\n * 判断在屏幕上滑动的方向，允许在任意盒子中滑动，移动过程中实时返回当前X/Y坐标，接收回调函数，返回起始位置和结束位置的X/Y坐标值对象，支持 PC 和移动端。\n * @param selector 指定在某个元素上滑动，传入其标签名或 class 或 id，请确保使用唯一标识\n * @param cb 回调函数，第一个参数为滑动结束时包含起始位置和结束位置的X/Y坐标值对象\n * @param realXY 滑动/移动过程是否实时返回当前X/Y坐标，开启后回调函数中支持第二个参数接收实时坐标对象，默认：false\n * @param realStartEndXY 实时返回当前X/Y坐标后，同时是否实时返回起始位置和结束位置的X/Y坐标值对象，默认：false，返回空对象\n * @example\n * ```js\n * slideDirection('#box', (dir, real) => console.log(dir), true, false) // {startX: 54, startY: 82, endX: 54, endY: 82}\n * ```\n */\nconst slideDirection = (\n  selector: string | HTMLDivElement,\n  cb: CallBack,\n  realXY = false,\n  realStartEndXY = false\n) => {\n  let startX = 0,\n    startY = 0,\n    endX = 0,\n    endY = 0,\n    realX = 0,\n    realY = 0,\n    el =\n      typeof selector === \"string\"\n        ? (document.querySelector(`${selector}`) as HTMLElement)\n        : selector;\n  if (el === null) {\n    throw new Error(`${selector}无法查找到元素`);\n  }\n  if (el.ontouchstart === null) {\n    el.ontouchstart = function (e) {\n      endX = endY = realX = realY = 0;\n      startX = e.changedTouches[0].clientX;\n      startY = e.changedTouches[0].clientY;\n    };\n    realXY &&\n      (el.ontouchmove = function (e) {\n        realX = e.changedTouches[0].clientX;\n        realY = e.changedTouches[0].clientY;\n        cb(\n          realStartEndXY\n            ? {\n                startX,\n                startY,\n                endX,\n                endY,\n              }\n            : {},\n          {\n            realX,\n            realY,\n          }\n        );\n      });\n    el.ontouchend = function (e) {\n      endX = e.changedTouches[0].clientX;\n      endY = e.changedTouches[0].clientY;\n      cb(\n        {\n          startX,\n          startY,\n          endX,\n          endY,\n        },\n        {\n          realX,\n          realY,\n        }\n      );\n    };\n  } else {\n    el.onmousedown = function (e) {\n      endX = endY = realX = realY = 0;\n      startX = e.clientX;\n      startY = e.clientY;\n      realXY &&\n        (el.onmousemove = function (e) {\n          realX = e.clientX;\n          realY = e.clientY;\n          cb(\n            realStartEndXY\n              ? {\n                  startX,\n                  startY,\n                  endX,\n                  endY,\n                }\n              : {},\n            {\n              realX,\n              realY,\n            }\n          );\n        });\n    };\n    document.onmouseup = function (e) {\n      if (el.onmousemove === null) return;\n      endX = e.clientX;\n      endY = e.clientY;\n      el.onmousemove = null;\n      cb(\n        {\n          startX,\n          startY,\n          endX,\n          endY,\n        },\n        {\n          realX,\n          realY,\n        }\n      );\n    };\n  }\n};\n\nexport default slideDirection;"],"names":["throttleFn","fn","ms","trailing","flag","e","setTimeout","targetEl","sourceEl","designSize","designW","scaleRate","clientWidth","style","transformOrigin","transform","concat","options","callback","V","source","document","querySelector","box","target","boxChildren","Array","from","children","filter","v","dataset","jtType","arr","onclick","id","test","this","jtId","diff","speed","targetHeight","parseFloat","getComputedStyle","height","scrollTop","offsetTop","jMove","scrollTo","requestAnimationFrame","offsetHeight","scrollHeight","addEventListener","map","distance","Math","abs","tmp","sort","p","n","slice","el","canvas","paths","eventType","cb","opt","current","index","undefined","path","isArrEvent","isArray","cleanups","ctx","getContext","onSetValue_1","cursor","i","onPathEvent_1","ev","offsetX","offsetY","clientX","clientY","type","dpr","width","findIndex","isPointInPath","forEach","push","removeEventListener","cleanup","opts","createElement","w","h","font","attrs","o_1","Object","keys","key","timer","t","Date","getTime","maxWait","clearTimeout","data","searchField","searchValue","rest","_a","childrenField","searchTree","d","f","toUpperCase","includes","search","filterTree","pass","length","separator","sep","hasHours","showHours","dateTimer","millisecond","Number","Y","getFullYear","M","getMonth","D","getDate","getHours","m","getMinutes","s","getSeconds","part","location","href","split","join","delay","onscroll","boxHeight","boxScrollHeight","boxScrollTop","string","matchString","record","len","result","every","anchor","down","Boolean","foo","scrollY","documentElement","body","clientHeight","selector","realXY","realStartEndXY","startX","startY","endX","endY","realX","realY","Error","ontouchstart","changedTouches","ontouchmove","ontouchend","onmousedown","onmousemove","onmouseup"],"mappings":"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"}