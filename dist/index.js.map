{"version":3,"file":"index.js","sources":["../src/adaptiveScaling.ts","../src/boxAnchor.ts","../src/debounceFn.ts","../src/filterTree.ts","../src/formatDate.ts","../src/formatUrlSearch.ts","../src/infiniteScroll.ts","../src/matchString.ts","../src/pageAnchor.ts","../src/slideDirection.ts","../src/throttleFn.ts"],"sourcesContent":["/**\n * 自适应等比缩放。适用大屏可视化自动适配屏幕\n * @param targetEl 需要去适应的（父级）盒子, 将元素等比例缩放撑满盒子（进入全屏状态的元素应该是父级盒子）。\n * @param sourceEl 需要被缩放的元素，它会自适应父级盒子。\n * @param designSize 设计稿尺寸，如：1920x1080，则传入[1920,1080]。\n * @example\n * ```js\n * adaptiveScaling(HTMLElement, HTMLElement, [1920, 1080])\n * ```\n */\nconst adaptiveScaling = (\n  targetEl: HTMLElement,\n  sourceEl: HTMLElement,\n  designSize: number[]\n) => {\n  const [designW, designH] = designSize;\n  const targetWidth = targetEl.clientWidth;\n  // const targetHeight = targetEl.clientHeight;\n  // 盒子尺寸比\n  // const realRatio = targetWidth / targetHeight;\n  // 设计稿比例\n  // const designRatio = designW / designH;\n  // 缩放率\n  let scaleRate = targetWidth / designW;\n  // 如果是竖屏，按高缩放\n  // if (realRatio.toFixed(1) > designRatio.toFixed(1)) {\n  //   scaleRate = targetHeight / designH;\n  // }\n  sourceEl.style.transformOrigin = \"left top\";\n  sourceEl.style.transform = `scale(${scaleRate})`;\n  // sourceEl.style.width = `${targetWidth / scaleRate}px`;\n};\n\nexport default adaptiveScaling;\n","/**\n * 盒子锚点，在任意可滑动盒子中跳转；监听事件元素需指定 data-jt-id 值为目标元素唯一标识 id\n * @param options\n * 1、source：监听点击事件元素（或其父级）选择器，请确保唯一(①选择器带元素名（如：button#search）则监听其内部最深层的元素（理论情况，既实际点击到的元素），该元素须添加 data-jt-id 属性，属性值为目标容器内目标对象的 id（该目标对象须指定 data-jt-type 的值为 'jt'，以配合 callback 工作）。②选择器不带元素名（如：#search）则只监听此元素点击事件，data-jt-id 属性须绑定在此元素上。)；\n * 2、target：目标可滚动容器的选择器，请确保唯一，容器内的目标对象 id 值为对应的 data-jt-id 值（该目标对象须指定 data-jt-type 的值为 'jt'，以配合 callback 工作）；\n * 3、diff：滑动到与父元素的顶部距离差，默认值：4；\n * 4、speed：滑动速度，默认值：20。\n * @param callback 指定回调函数后，函数将在滚动过程定点执行，函数参数默认返回一个对象，包含此时在可视屏幕内指定 data-jt-id 属性的元素和该元素的 data-jt-id 属性值（须目标容器中目标对象指定 data-jt-type 的值为 'jt'）。\n * @example\n * ```js\n * <div id=\"source-box\"><a data-jt-id=\"h1\">锚点到h1</a></div>\n * <div id=\"target-box\"><h4 id=\"h1\" data-jt-type=\"jt\">我的id是h1</h4></div>\n * boxAnchor({source: 'div#source-box', target: '#target-box'}, (res) => {})\n * ```\n */\nconst boxAnchor = (\n  options: { source: string; target: string; diff?: number; speed?: number },\n  callback: (res: { el: HTMLElement; jtId: string }) => void\n) => {\n  var source = document.querySelector(options.source) as HTMLElement,\n    box = document.querySelector(options.target) as HTMLElement,\n    boxChildren = Array.from(box?.children || []).filter(\n      (v: any) => v.dataset.jtType === \"jt\"\n    ),\n    V: HTMLElement,\n    arr: Element[] | null = null;\n  source.onclick = function (e) {\n    var id =\n      \"#\" +\n      (/^[.|#]/.test(options.source)\n        ? (this as HTMLElement).dataset.jtId\n        : (e.target as HTMLElement).dataset.jtId);\n    var target = document.querySelector(id) as HTMLElement;\n    if (!target) return;\n    var diff = options.diff ? options.diff : 0;\n    var speed = options.speed ? options.speed : 10;\n    var targetHeight = parseFloat(getComputedStyle(target).height);\n    var flag = box.scrollTop >= target.offsetTop - targetHeight - diff;\n    (function jMove() {\n      if (flag) {\n        if (\n          box.scrollTop > target.offsetTop - targetHeight - diff &&\n          box.scrollTop !== 0\n        ) {\n          box.scrollTo(0, box.scrollTop - speed);\n          requestAnimationFrame(jMove);\n        }\n      } else {\n        if (\n          target.offsetTop - targetHeight - diff - box.scrollTop > speed &&\n          box.scrollTop + box.offsetHeight < box.scrollHeight - speed\n        ) {\n          box.scrollTo(0, box.scrollTop + speed);\n          requestAnimationFrame(jMove);\n        }\n      }\n    })();\n    return false;\n  };\n  typeof callback === \"function\" &&\n    box.addEventListener(\"scroll\", function () {\n      boxChildren.map((v: any) => {\n        if (v !== V) {\n          V = v;\n          v.distance = Math.abs(v.offsetTop - box.scrollTop);\n        }\n      });\n      const tmp = boxChildren.sort((p: any, n: any) => p.distance - n.distance);\n      if (!arr || arr[0].id !== tmp[0].id) {\n        arr = tmp.slice();\n        callback({\n          el: tmp[0] as HTMLElement,\n          jtId: tmp[0].id,\n        });\n      }\n    });\n};\n\nexport default boxAnchor;\n","/**\n * 防抖函数，在连续的函数触发过程执行最后一次\n * @param fn 连续触发的函数\n * @param ms 执行等待的毫秒数，默认 200\n * @param opt { maxWait: 最大等待时间，超过立即执行一次 }\n * @returns A new, debounce, function.\n * @example\n * ```js\n *  document.addEventListener('mousemove', jutils.debounceFn(() => {\n      console.log(333);\n    }, 500, { maxWait: 2000 }))\n * ```\n */\nconst debounceFn = (\n  fn: () => void,\n  ms: number = 200,\n  opt?: { maxWait?: number }\n) => {\n  let timer: NodeJS.Timeout;\n  let t: number | undefined;\n  return () => {\n    if (t === undefined) {\n      t = new Date().getTime();\n    }\n    if (opt?.maxWait) {\n      if (t && new Date().getTime() - t > opt.maxWait) {\n        fn();\n        t = undefined;\n      }\n    }\n    clearTimeout(timer);\n    timer = setTimeout(() => {\n      fn();\n      t = undefined;\n    }, ms);\n  };\n};\n\nexport default debounceFn;\n","type FilterTreeParams<T> = {\n  childrenField?: string;\n  callback?: (arg: T) => void;\n};\n\n/**\n * 搜索过滤树。按树层级返回过滤后树数据\n * @param data 树数据，须 children 字段，可使用 childrenField 替换\n * @param searchField 需要搜索的字段\n * @param searchValue 搜索的字符串\n * @param param3 { childrenField: 子级数组不是children，可替换 children 字段，callback：回调函数，过滤的数据用来再做些什么？ }\n * @returns 过滤后树数据\n * @example\n * ```js\n * const data = [{a: 1, b: 2, children: [{a: 13, b: 14}]}];\n * // 搜索a字段，值包含3的项\n * const result = filterTree(data, 'a', '3');\n * ```\n */\nexport const filterTree = <T>(\n  data: T[],\n  searchField: string,\n  searchValue: string,\n  rest: FilterTreeParams<T>\n): T[] => {\n  const { childrenField, callback } = rest || {};\n  const children = childrenField || \"children\";\n  const searchTree = (d: any[]) => {\n    d.forEach((v) => {\n      const f = v[searchField]\n        ?.toUpperCase()\n        .includes(searchValue?.toUpperCase());\n      v.search = f;\n      if (v[children]) {\n        searchTree(v[children]);\n      }\n    });\n  };\n  const filterTree = (data: any[]) => {\n    return data.filter((v) => {\n      if (v[children]) {\n        v[children] = filterTree(v[children]);\n      }\n      const pass = v.search || v[children]?.length > 0;\n      delete v.search;\n      if (pass) callback?.(v);\n      return pass;\n    });\n  };\n  searchTree(data);\n  return filterTree(data);\n};\n\nexport default filterTree;\n","/**\n * 格式化当前或自定义时间日期，自定义年月日分隔符和时分秒显示\n * @param opts sep: 年月日分隔符; millisecond: 自定义时间（毫秒）或Date(); showHours: 是否显示时分秒。默认：false\n * @returns string\n * @example\n * ```js\n * formatTime({sep: '-', millisecond: Date.now() + 20, showHours: true}) // 2020-08-24 15:06:32\n * ```\n */\nconst formatDate = (opts?: {\n  sep?: string;\n  millisecond?: string | number;\n  showHours?: boolean;\n}) => {\n  const separator = opts?.sep || \"-\";\n  const hasHours = opts?.showHours || false;\n  let dateTimer = opts?.millisecond\n    ? new Date(Number(opts.millisecond))\n    : new Date();\n  let Y: number | string = dateTimer.getFullYear();\n  let M: number | string = dateTimer.getMonth() + 1;\n  let D: number | string = dateTimer.getDate();\n  let h: number | string = dateTimer.getHours();\n  let m: number | string = dateTimer.getMinutes();\n  let s: number | string = dateTimer.getSeconds();\n  M = M >= 10 ? M : \"0\" + M;\n  D = D >= 10 ? D : \"0\" + D;\n  h = h >= 10 ? h : \"0\" + h;\n  m = m >= 10 ? m : \"0\" + m;\n  s = s >= 10 ? s : \"0\" + s;\n\n  return hasHours\n    ? `${Y + separator + M + separator + D} ${h}:${m}:${s}`\n    : `${Y + separator + M + separator + D}`;\n};\n\nexport default formatDate;\n","type ReturnType = Record<string, string> | string;\n/**\n * 格式化URL查询参数\n * @param key 返回某个参数值，不传返回所有参数的集合\n * @returns object | string\n */\nconst formatUrlSearch = (key?: string): ReturnType => {\n  const p = {};\n  const part = location.href.split(\"?\")[1];\n  part\n    ?.split(\"#\")[0]\n    .split(\"&\")\n    .forEach((v) => {\n      p[v.split(\"=\")[0]] = v.split(\"=\").slice(1).join(\"=\");\n    });\n  return key && key in p ? p[key] : p;\n};\n\nexport default formatUrlSearch;\n","/**\n * 滚动至底部时，加载更多数据，或执行一些自定义的事件。返回函数清除绑定\n * @param opts ①el：需要无限滚动元素的选择器，请确保唯一；②delay：节流时延，单位为ms，默认值100；③distance：触发加载的距离阈值，单位为px，默认值10。\n * @param callback 到达距离阈值时触发的事件\n * @returns unbind 返回一个可清除绑定滚动事件的函数。\n * @example\n * ```js\n * infiniteScroll({el: '.big-box', delay: 100, distance: 10 }, () => { console.log('hello') }))\n * ```\n */\nconst infiniteScroll = (\n  opts: { el: string; delay?: number; distance?: number },\n  callback: () => void\n) => {\n  var box = document.querySelector(opts.el) as HTMLElement;\n  var delay = opts.delay || 100,\n    distance = opts.distance || 10,\n    timer: NodeJS.Timeout,\n    flag = true;\n  var unbind = () => {\n    box.onscroll = null;\n  };\n  box.onscroll = function () {\n    if (flag) {\n      var boxHeight = parseFloat(getComputedStyle(box).height),\n        boxScrollHeight = box.scrollHeight,\n        boxScrollTop = box.scrollTop;\n      flag = false;\n      timer = setTimeout(function () {\n        flag = true;\n      }, delay);\n      if (boxScrollHeight - boxScrollTop - boxHeight < distance) {\n        callback();\n      }\n    }\n  };\n  return unbind;\n};\n\nexport default infiniteScroll;\n","/**\n * 字符串中匹配字符，匹配出的字符可用于高亮显示等\n * @param string 字符串\n * @param matchString 需要匹配的字符\n * @returns 返回对象包含两个参数，及匹配的结果数组，结果中匹配到的使用undefined占位，自行循环渲染使用matchString值替换undefined即可\n * @example\n * ```js\n * const res = jutils.matchString('1234422243', '2')\n * ```\n */\nconst matchString = (string: string, matchString: string) => {\n  let record = matchString;\n  // 只处理全大/小写情况\n  if (!string.includes(record)) {\n    record = record.toUpperCase();\n  }\n  const arr = string.split(record);\n  let len = arr.length - 1;\n  let result: (string | undefined)[] = [];\n  if (!arr.includes(\"\")) {\n    // 查询字符在字符串中，使用undefined占位\n    arr.forEach((v, i) => {\n      if (i === len) {\n        result.push(v);\n      } else {\n        result.push(v, undefined);\n      }\n    });\n  } else {\n    // 查询字符在字符串首尾\n    if (arr.every((v) => v === \"\")) {\n      // 被完整匹配\n      // 被全匹配\n      result = arr.length === 2 ? [\"\"] : arr.slice(1);\n    } else {\n      // 未被全匹配\n      // 在首尾匹配，且之中也包含\n      if (arr.length > 1) {\n        // 查询字符在字符串中，使用undefined占位\n        arr.forEach((v, i) => {\n          if (v) {\n            if (i === len) {\n              result.push(v);\n            } else {\n              result.push(v, undefined);\n            }\n          } else {\n            if (i !== len) {\n              result.push(undefined);\n            }\n          }\n        });\n      } else {\n        result = arr;\n      }\n    }\n  }\n\n  return {\n    string,\n    matchString,\n    result,\n  };\n};\n\nexport default matchString;\n","/**\n * 指定页面滑动到某个位置，自定义滑动速度/滑动方向。须整个页面可滑动\n * @param opts anchor：滑动到的目标位置；speed：滑动速度；down：向下滑动？向下（true）/向上（false），默认：true\n * @example\n * ```js\n * pageAnchor(100, 10, true)\n * ```\n */\nconst pageAnchor = (opts?: {\n  anchor?: number;\n  speed?: number;\n  down?: boolean;\n}) => {\n  var anchor = opts?.anchor || 0,\n    speed = opts?.speed || 10,\n    down = opts?.down === undefined ? true : Boolean(opts.down);\n  (function foo() {\n    if (down) {\n      if (scrollY < anchor) {\n        var scrollTop =\n            document.documentElement.scrollTop || document.body.scrollTop,\n          clientHeight =\n            document.documentElement.clientHeight || document.body.clientHeight,\n          scrollHeight =\n            document.documentElement.scrollHeight || document.body.scrollHeight;\n        if (\n          scrollHeight > clientHeight &&\n          scrollTop + clientHeight < scrollHeight\n        ) {\n          scrollTo(0, scrollY + speed);\n          requestAnimationFrame(foo);\n        }\n      }\n    } else {\n      if (scrollY > anchor) {\n        scrollTo(0, scrollY - speed);\n        requestAnimationFrame(foo);\n      }\n    }\n  })();\n};\n\nexport default pageAnchor;\n","interface CallBack {\n  (\n    dir: {\n      startX?: number;\n      startY?: number;\n      endX?: number;\n      endY?: number;\n    },\n    real: {\n      realX?: number;\n      realY?: number;\n    }\n  ): void;\n}\n/**\n * 判断在屏幕上滑动的方向，允许在任意盒子中滑动，移动过程中实时返回当前X/Y坐标，接收回调函数，返回起始位置和结束位置的X/Y坐标值对象，支持 PC 和移动端。\n * @param selector 指定在某个元素上滑动，传入其标签名或 class 或 id，请确保使用唯一标识\n * @param cb 回调函数，第一个参数为滑动结束时包含起始位置和结束位置的X/Y坐标值对象\n * @param realXY 滑动/移动过程是否实时返回当前X/Y坐标，开启后回调函数中支持第二个参数接收实时坐标对象，默认：false\n * @param realStartEndXY 实时返回当前X/Y坐标后，同时是否实时返回起始位置和结束位置的X/Y坐标值对象，默认：false，返回空对象\n * @example\n * ```js\n * slideDirection('#box', (dir, real) => console.log(dir), true, false) // {startX: 54, startY: 82, endX: 54, endY: 82}\n * ```\n */\nconst slideDirection = (\n  selector: string | HTMLDivElement,\n  cb: CallBack,\n  realXY = false,\n  realStartEndXY = false\n) => {\n  let startX = 0,\n    startY = 0,\n    endX = 0,\n    endY = 0,\n    realX = 0,\n    realY = 0,\n    el =\n      typeof selector === \"string\"\n        ? (document.querySelector(`${selector}`) as HTMLElement)\n        : selector;\n  if (el === null) {\n    throw new Error(`${selector}无法查找到元素`);\n  }\n  if (el.ontouchstart === null) {\n    el.ontouchstart = function (e) {\n      endX = endY = realX = realY = 0;\n      startX = e.changedTouches[0].clientX;\n      startY = e.changedTouches[0].clientY;\n    };\n    realXY &&\n      (el.ontouchmove = function (e) {\n        realX = e.changedTouches[0].clientX;\n        realY = e.changedTouches[0].clientY;\n        cb(\n          realStartEndXY\n            ? {\n                startX,\n                startY,\n                endX,\n                endY,\n              }\n            : {},\n          {\n            realX,\n            realY,\n          }\n        );\n      });\n    el.ontouchend = function (e) {\n      endX = e.changedTouches[0].clientX;\n      endY = e.changedTouches[0].clientY;\n      cb(\n        {\n          startX,\n          startY,\n          endX,\n          endY,\n        },\n        {\n          realX,\n          realY,\n        }\n      );\n    };\n  } else {\n    el.onmousedown = function (e) {\n      endX = endY = realX = realY = 0;\n      startX = e.clientX;\n      startY = e.clientY;\n      realXY &&\n        (el.onmousemove = function (e) {\n          realX = e.clientX;\n          realY = e.clientY;\n          cb(\n            realStartEndXY\n              ? {\n                  startX,\n                  startY,\n                  endX,\n                  endY,\n                }\n              : {},\n            {\n              realX,\n              realY,\n            }\n          );\n        });\n    };\n    document.onmouseup = function (e) {\n      if (el.onmousemove === null) return;\n      endX = e.clientX;\n      endY = e.clientY;\n      el.onmousemove = null;\n      cb(\n        {\n          startX,\n          startY,\n          endX,\n          endY,\n        },\n        {\n          realX,\n          realY,\n        }\n      );\n    };\n  }\n};\n\nexport default slideDirection;","/**\n * 节流函数，在连续的函数触发过程限制执行次数\n * @param fn 在毫秒（ms）后要执行的函数\n * @param ms 延迟毫秒数，默认 200\n * @param trailing 节流过程中最后一次自动执行，默认为 false\n * @returns A new, throttled, function.\n * @example\n * ```js\n *  document.addEventListener('mousemove', jutils.throttleFn(() => {\n      console.log(333);\n    }, 1000, true))\n * ```\n */\nconst throttleFn = (\n  fn: () => void,\n  ms: number = 200,\n  trailing: boolean = false\n): (() => void) => {\n  let flag = true;\n  return () => {\n    if (flag) {\n      flag = false;\n      setTimeout(() => {\n        flag = true;\n        if (trailing) {\n          setTimeout(() => {\n            if (flag) {\n              fn();\n            }\n          }, 10);\n        }\n      }, ms);\n      fn();\n    }\n  };\n};\n\nexport default throttleFn;\n"],"names":["targetEl","sourceEl","designSize","designW","scaleRate","clientWidth","style","transformOrigin","transform","concat","options","callback","V","source","document","querySelector","box","target","boxChildren","Array","from","children","filter","v","dataset","jtType","arr","onclick","e","id","test","this","jtId","diff","speed","targetHeight","parseFloat","getComputedStyle","height","flag","scrollTop","offsetTop","jMove","scrollTo","requestAnimationFrame","offsetHeight","scrollHeight","addEventListener","map","distance","Math","abs","tmp","sort","p","n","slice","el","fn","ms","opt","timer","t","undefined","Date","getTime","maxWait","clearTimeout","setTimeout","data","searchField","searchValue","rest","_a","childrenField","searchTree","d","forEach","f","toUpperCase","includes","search","filterTree","pass","length","opts","separator","sep","hasHours","showHours","dateTimer","millisecond","Number","Y","getFullYear","M","getMonth","D","getDate","h","getHours","m","getMinutes","s","getSeconds","key","part","location","href","split","join","delay","onscroll","boxHeight","boxScrollHeight","boxScrollTop","string","matchString","record","len","result","every","i","push","anchor","down","Boolean","foo","scrollY","documentElement","body","clientHeight","selector","cb","realXY","realStartEndXY","startX","startY","endX","endY","realX","realY","Error","ontouchstart","changedTouches","clientX","clientY","ontouchmove","ontouchend","onmousedown","onmousemove","onmouseup","trailing"],"mappings":"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"}