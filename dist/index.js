!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).jutils={})}(this,(function(e){"use strict";e.adaptiveScaling=function(e,t,n){var o=n[0];n[1];var l=e.clientWidth/o;t.style.transformOrigin="left top",t.style.transform="scale(".concat(l,")")},e.boxAnchor=function(e,t){var n,o=document.querySelector(e.source),l=document.querySelector(e.target),c=Array.from((null==l?void 0:l.children)||[]).filter((function(e){return"jt"===e.dataset.jtType})),i=null;o.onclick=function(t){var n="#"+(/^[.|#]/.test(e.source)?this.dataset.jtId:t.target.dataset.jtId),o=document.querySelector(n);if(o){var c=e.diff?e.diff:0,i=e.speed?e.speed:10,r=parseFloat(getComputedStyle(o).height),u=l.scrollTop>=o.offsetTop-r-c;return function e(){u?l.scrollTop>o.offsetTop-r-c&&0!==l.scrollTop&&(l.scrollTo(0,l.scrollTop-i),requestAnimationFrame(e)):o.offsetTop-r-c-l.scrollTop>i&&l.scrollTop+l.offsetHeight<l.scrollHeight-i&&(l.scrollTo(0,l.scrollTop+i),requestAnimationFrame(e))}(),!1}},"function"==typeof t&&l.addEventListener("scroll",(function(){c.map((function(e){e!==n&&(n=e,e.distance=Math.abs(e.offsetTop-l.scrollTop))}));var e=c.sort((function(e,t){return e.distance-t.distance}));i&&i[0].id===e[0].id||(i=e.slice(),t({el:e[0],jtId:e[0].id}))}))},e.debounceFn=function(e,t,n){var o,l;return void 0===t&&(t=200),function(){void 0===l&&(l=(new Date).getTime()),(null==n?void 0:n.maxWait)&&l&&(new Date).getTime()-l>n.maxWait&&(e(),l=void 0),clearTimeout(o),o=setTimeout((function(){e(),l=void 0}),t)}},e.filterTree=function(e,t,n,o){var l=o||{},c=l.childrenField,i=l.callback,r=c||"children",u=function(e){e.forEach((function(e){var o,l=null===(o=e[t])||void 0===o?void 0:o.toUpperCase().includes(null==n?void 0:n.toUpperCase());e.search=l,e[r]&&u(e[r])}))},s=function(e){return e.filter((function(e){var t;e[r]&&(e[r]=s(e[r]));var n=e.search||(null===(t=e[r])||void 0===t?void 0:t.length)>0;return delete e.search,n&&(null==i||i(e)),n}))};return u(e),s(e)},e.formatDate=function(e){var t=(null==e?void 0:e.sep)||"-",n=(null==e?void 0:e.showHours)||!1,o=(null==e?void 0:e.millisecond)?new Date(Number(e.millisecond)):new Date,l=o.getFullYear(),c=o.getMonth()+1,i=o.getDate(),r=o.getHours(),u=o.getMinutes(),s=o.getSeconds();return c=c>=10?c:"0"+c,i=i>=10?i:"0"+i,r=r>=10?r:"0"+r,u=u>=10?u:"0"+u,s=s>=10?s:"0"+s,n?"".concat(l+t+c+t+i," ").concat(r,":").concat(u,":").concat(s):"".concat(l+t+c+t+i)},e.formatUrlSearch=function(e){var t={},n=location.href.split("?")[1];return null==n||n.split("#")[0].split("&").forEach((function(e){t[e.split("=")[0]]=e.split("=").slice(1).join("=")})),e&&e in t?t[e]:t},e.infiniteScroll=function(e,t){var n=document.querySelector(e.el),o=e.delay||100,l=e.distance||10,c=!0;return n.onscroll=function(){if(c){var e=parseFloat(getComputedStyle(n).height),i=n.scrollHeight,r=n.scrollTop;c=!1,setTimeout((function(){c=!0}),o),i-r-e<l&&t()}},function(){n.onscroll=null}},e.matchString=function(e,t){var n=t;e.includes(n)||(n=n.toUpperCase());var o=e.split(n),l=o.length-1,c=[];return o.includes("")?o.every((function(e){return""===e}))?c=2===o.length?[""]:o.slice(1):o.length>1?o.forEach((function(e,t){e?t===l?c.push(e):c.push(e,void 0):t!==l&&c.push(void 0)})):c=o:o.forEach((function(e,t){t===l?c.push(e):c.push(e,void 0)})),{string:e,matchString:t,result:c}},e.pageAnchor=function(e){var t=(null==e?void 0:e.anchor)||0,n=(null==e?void 0:e.speed)||10,o=void 0===(null==e?void 0:e.down)||Boolean(e.down);!function e(){if(o){if(scrollY<t){var l=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.clientHeight||document.body.clientHeight,i=document.documentElement.scrollHeight||document.body.scrollHeight;i>c&&l+c<i&&(scrollTo(0,scrollY+n),requestAnimationFrame(e))}}else scrollY>t&&(scrollTo(0,scrollY-n),requestAnimationFrame(e))}()},e.slideDirection=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var l=0,c=0,i=0,r=0,u=0,s=0,a="string"==typeof e?document.querySelector("".concat(e)):e;if(null===a)throw new Error("".concat(e,"无法查找到元素"));null===a.ontouchstart?(a.ontouchstart=function(e){i=r=u=s=0,l=e.changedTouches[0].clientX,c=e.changedTouches[0].clientY},n&&(a.ontouchmove=function(e){u=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,t(o?{startX:l,startY:c,endX:i,endY:r}:{},{realX:u,realY:s})}),a.ontouchend=function(e){i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY,t({startX:l,startY:c,endX:i,endY:r},{realX:u,realY:s})}):(a.onmousedown=function(e){i=r=u=s=0,l=e.clientX,c=e.clientY,n&&(a.onmousemove=function(e){u=e.clientX,s=e.clientY,t(o?{startX:l,startY:c,endX:i,endY:r}:{},{realX:u,realY:s})})},document.onmouseup=function(e){null!==a.onmousemove&&(i=e.clientX,r=e.clientY,a.onmousemove=null,t({startX:l,startY:c,endX:i,endY:r},{realX:u,realY:s}))})},e.throttleFn=function(e,t,n){void 0===t&&(t=200),void 0===n&&(n=!1);var o=!0;return function(){o&&(o=!1,setTimeout((function(){o=!0,n&&setTimeout((function(){o&&e()}),10)}),t),e())}}}));
//# sourceMappingURL=index.js.map
