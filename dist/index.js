!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).jutils={})}(this,(function(e){"use strict";var t=function(e,t,n){void 0===t&&(t=200),void 0===n&&(n=!1);var o=!0;return function(i){o&&(o=!1,setTimeout((function(){o=!0,n&&setTimeout((function(){o&&e(i)}),10)}),t),e(i))}};e.adaptiveScaling=function(e,t,n){var o=n[0];n[1];var i=e.clientWidth/o;t.style.transformOrigin="left top",t.style.transform="scale(".concat(i,")")},e.boxAnchor=function(e,t){var n,o=document.querySelector(e.source),i=document.querySelector(e.target),r=Array.from((null==i?void 0:i.children)||[]).filter((function(e){return"jt"===e.dataset.jtType})),l=null;o.onclick=function(t){var n="#"+(/^[.|#]/.test(e.source)?this.dataset.jtId:t.target.dataset.jtId),o=document.querySelector(n);if(o){var r=e.diff?e.diff:0,l=e.speed?e.speed:10,c=parseFloat(getComputedStyle(o).height),u=i.scrollTop>=o.offsetTop-c-r;return function e(){u?i.scrollTop>o.offsetTop-c-r&&0!==i.scrollTop&&(i.scrollTo(0,i.scrollTop-l),requestAnimationFrame(e)):o.offsetTop-c-r-i.scrollTop>l&&i.scrollTop+i.offsetHeight<i.scrollHeight-l&&(i.scrollTo(0,i.scrollTop+l),requestAnimationFrame(e))}(),!1}},"function"==typeof t&&i.addEventListener("scroll",(function(){r.map((function(e){e!==n&&(n=e,e.distance=Math.abs(e.offsetTop-i.scrollTop))}));var e=r.sort((function(e,t){return e.distance-t.distance}));l&&l[0].id===e[0].id||(l=e.slice(),t({el:e[0],jtId:e[0].id}))}))},e.canvasPathEvent=function(e,n,o,i,r){var l={index:void 0,path:void 0,e:{}},c=Array.isArray(o),u=(null==r?void 0:r.ms)||80,a=[],s=e.getContext("2d");if(s){var d=function(t,n,o){l.index=n,l.path=o,e.style.cursor=t},f=t((function(t){var u=t.offsetX,a=t.offsetY,f=t.clientX,h=t.clientY,v=t.type,p=(null==r?void 0:r.dpr)||e.width/e.clientWidth,m=n.findIndex((function(e){return s.isPointInPath(e,u*p,a*p)}));l.e.clientX=f,l.e.clientY=h,-1!==m?c?o[0]===v?d("pointer",m,n[m]):e.style.cursor="pointer":d("pointer",m,n[m]):d("default"),i(l)}),u);(c?o:[o]).forEach((function(t){e.addEventListener(t,f),a.push((function(){e.removeEventListener(t,f)}))}))}return function(){a.forEach((function(e){e()}))}},e.createCanvas=function(e,t){var n=e||document.createElement("canvas"),o=(null==t?void 0:t.dpr)||2,i=(null==t?void 0:t.width)||200,r=(null==t?void 0:t.height)||100;n.width=i,n.height=r,n.style.width=i/o+"px",n.style.height=r/o+"px";var l=n.getContext("2d");if(l.font="".concat(13*o,"px system-ui"),null==t?void 0:t.attrs){var c=null==t?void 0:t.attrs;Object.keys(c).forEach((function(e){l[e]=c[e]}))}return n},e.debounceFn=function(e,t,n){var o,i;return void 0===t&&(t=200),function(r){void 0===i&&(i=(new Date).getTime()),(null==n?void 0:n.maxWait)&&i&&(new Date).getTime()-i>n.maxWait&&(e(r),i=void 0),clearTimeout(o),o=setTimeout((function(){e(r),i=void 0}),t)}},e.filterTree=function(e,t,n,o){var i=o||{},r=i.childrenField,l=i.callback,c=r||"children",u=function(e){e.forEach((function(e){var o,i=null===(o=e[t])||void 0===o?void 0:o.toUpperCase().includes(null==n?void 0:n.toUpperCase());e.search=i,e[c]&&u(e[c])}))},a=function(e){return e.filter((function(e){var t;e[c]&&(e[c]=a(e[c]));var n=e.search||(null===(t=e[c])||void 0===t?void 0:t.length)>0;return delete e.search,n&&(null==l||l(e)),n}))};return u(e),a(e)},e.formatDate=function(e){var t=(null==e?void 0:e.sep)||"-",n=(null==e?void 0:e.showHours)||!1,o=(null==e?void 0:e.millisecond)?new Date(Number(e.millisecond)):new Date,i=o.getFullYear(),r=o.getMonth()+1,l=o.getDate(),c=o.getHours(),u=o.getMinutes(),a=o.getSeconds();return r=r>=10?r:"0"+r,l=l>=10?l:"0"+l,c=c>=10?c:"0"+c,u=u>=10?u:"0"+u,a=a>=10?a:"0"+a,n?"".concat(i+t+r+t+l," ").concat(c,":").concat(u,":").concat(a):"".concat(i+t+r+t+l)},e.formatUrlSearch=function(e){var t={},n=location.href.split("?")[1];return null==n||n.split("#")[0].split("&").forEach((function(e){t[e.split("=")[0]]=e.split("=").slice(1).join("=")})),e&&e in t?t[e]:t},e.freelySplit=function(e,t,n){var o=(n||{}).retain,i=void 0===o||o,r=[],l="";return e.split("").forEach((function(e,n,o){if(t.includes(e)){var c=""===l?i?[e]:[]:i?[l,e]:[l];r.push.apply(r,c),l=""}else l+=e,n===o.length-1&&r.push(l)})),r},e.infiniteScroll=function(e,t){var n=document.querySelector(e.el),o=e.delay||100,i=e.distance||10,r=!0;return n.onscroll=function(){if(r){var e=parseFloat(getComputedStyle(n).height),l=n.scrollHeight,c=n.scrollTop;r=!1,setTimeout((function(){r=!0}),o),l-c-e<i&&t()}},function(){n.onscroll=null}},e.marquee=function(e,t,n){void 0===t&&(t=2),void 0===n&&(n=15);var o,i=-1,r=0,l=[[1,180],[1,100],[1,40],[1,20],[1,10]];if(e.classList.add("jutilsmarquee"),null===document.querySelector("#jutilsmarquee")){var c=document.createElement("style");c.id="jutilsmarquee",c.innerText=".jutilsmarquee{white-space: nowrap;overflow: auto;}.jutilsmarquee::-webkit-scrollbar{display: none;}",document.head.append(c)}var u=e.scrollWidth-parseFloat(getComputedStyle(e).width);return o=setInterval((function(){i>=u?++r>n&&(e.scrollLeft=0,i=e.scrollLeft,r=0):(e.scrollBy(l[t][0],0),i=e.scrollLeft)}),l[t][1]),function(){clearInterval(o)}},e.matchString=function(e,t){var n=t;e.includes(n)||(n=n.toUpperCase());var o=e.split(n),i=o.length-1,r=[];return o.includes("")?o.every((function(e){return""===e}))?r=2===o.length?[""]:o.slice(1):o.length>1?o.forEach((function(e,t){e?t===i?r.push(e):r.push(e,void 0):t!==i&&r.push(void 0)})):r=o:o.forEach((function(e,t){t===i?r.push(e):r.push(e,void 0)})),{string:e,matchString:t,result:r}},e.pageAnchor=function(e){var t=(null==e?void 0:e.anchor)||0,n=(null==e?void 0:e.speed)||10,o=void 0===(null==e?void 0:e.down)||Boolean(e.down);!function e(){if(o){if(scrollY<t){var i=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.clientHeight||document.body.clientHeight,l=document.documentElement.scrollHeight||document.body.scrollHeight;l>r&&i+r<l&&(scrollTo(0,scrollY+n),requestAnimationFrame(e))}}else scrollY>t&&(scrollTo(0,scrollY-n),requestAnimationFrame(e))}()},e.slideDirection=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var i=0,r=0,l=0,c=0,u=0,a=0,s="string"==typeof e?document.querySelector("".concat(e)):e;if(null===s)throw new Error("".concat(e,"无法查找到元素"));null===s.ontouchstart?(s.ontouchstart=function(e){l=c=u=a=0,i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY},n&&(s.ontouchmove=function(e){u=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,t(o?{startX:i,startY:r,endX:l,endY:c}:{},{realX:u,realY:a})}),s.ontouchend=function(e){l=e.changedTouches[0].clientX,c=e.changedTouches[0].clientY,t({startX:i,startY:r,endX:l,endY:c},{realX:u,realY:a})}):(s.onmousedown=function(e){l=c=u=a=0,i=e.clientX,r=e.clientY,n&&(s.onmousemove=function(e){u=e.clientX,a=e.clientY,t(o?{startX:i,startY:r,endX:l,endY:c}:{},{realX:u,realY:a})})},document.onmouseup=function(e){null!==s.onmousemove&&(l=e.clientX,c=e.clientY,s.onmousemove=null,t({startX:i,startY:r,endX:l,endY:c},{realX:u,realY:a}))})},e.throttleFn=t,e.transHump=function(e,t,n){function o(e){return e.replace(/^.{1}/,(function(e){return e.toUpperCase()}))}return e.split(t).reduce((function(e,t,i){return e+(0===i?n?o(t):t:o(t))}),"")}}));
//# sourceMappingURL=index.js.map
