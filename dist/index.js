!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).jutils={})}(this,(function(t){"use strict";var e=function(t,e,n){void 0===e&&(e=200),void 0===n&&(n=!1);var o=!0;return function(i){o&&(o=!1,setTimeout((function(){o=!0,n&&setTimeout((function(){o&&t(i)}),10)}),e),t(i))}};t.adaptiveScaling=function(t,e,n){var o=n[0];n[1];var i=t.clientWidth/o;e.style.transformOrigin="left top",e.style.transform="scale(".concat(i,")")},t.boxAnchor=function(t,e){var n,o=document.querySelector(t.source),i=document.querySelector(t.target),c=Array.from((null==i?void 0:i.children)||[]).filter((function(t){return"jt"===t.dataset.jtType})),l=null;o.onclick=function(e){var n="#"+(/^[.|#]/.test(t.source)?this.dataset.jtId:e.target.dataset.jtId),o=document.querySelector(n);if(o){var c=t.diff?t.diff:0,l=t.speed?t.speed:10,r=parseFloat(getComputedStyle(o).height),u=i.scrollTop>=o.offsetTop-r-c;return function t(){u?i.scrollTop>o.offsetTop-r-c&&0!==i.scrollTop&&(i.scrollTo(0,i.scrollTop-l),requestAnimationFrame(t)):o.offsetTop-r-c-i.scrollTop>l&&i.scrollTop+i.offsetHeight<i.scrollHeight-l&&(i.scrollTo(0,i.scrollTop+l),requestAnimationFrame(t))}(),!1}},"function"==typeof e&&i.addEventListener("scroll",(function(){c.map((function(t){t!==n&&(n=t,t.distance=Math.abs(t.offsetTop-i.scrollTop))}));var t=c.sort((function(t,e){return t.distance-e.distance}));l&&l[0].id===t[0].id||(l=t.slice(),e({el:t[0],jtId:t[0].id}))}))},t.canvasPathEvent=function(t,n,o,i,c){var l={index:void 0,path:void 0,e:{}},r=Array.isArray(o),u=(null==c?void 0:c.ms)||80,a=[],s=t.getContext("2d");if(s){var d=function(e,n,o){l.index=n,l.path=o,t.style.cursor=e},f=e((function(e){var u=e.offsetX,a=e.offsetY,f=e.clientX,h=e.clientY,v=e.type,p=(null==c?void 0:c.dpr)||t.width/t.clientWidth,m=n.findIndex((function(t){return s.isPointInPath(t,u*p,a*p)}));l.e.clientX=f,l.e.clientY=h,-1!==m?r?o[0]===v?d("pointer",m,n[m]):t.style.cursor="pointer":d("pointer",m,n[m]):d("default"),i(l)}),u);(r?o:[o]).forEach((function(e){t.addEventListener(e,f),a.push((function(){t.removeEventListener(e,f)}))}))}return function(){a.forEach((function(t){t()}))}},t.createCanvas=function(t,e){var n=t||document.createElement("canvas"),o=(null==e?void 0:e.dpr)||2,i=(null==e?void 0:e.width)||200,c=(null==e?void 0:e.height)||100;n.width=i,n.height=c,n.style.width=i/o+"px",n.style.height=c/o+"px";var l=n.getContext("2d");if(l.font="".concat(13*o,"px system-ui"),null==e?void 0:e.attrs){var r=null==e?void 0:e.attrs;Object.keys(r).forEach((function(t){l[t]=r[t]}))}return n},t.debounceFn=function(t,e,n){var o,i;return void 0===e&&(e=200),function(c){void 0===i&&(i=(new Date).getTime()),(null==n?void 0:n.maxWait)&&i&&(new Date).getTime()-i>n.maxWait&&(t(c),i=void 0),clearTimeout(o),o=setTimeout((function(){t(c),i=void 0}),e)}},t.filterTree=function(t,e,n,o){var i=o||{},c=i.childrenField,l=i.callback,r=c||"children",u=function(t){t.forEach((function(t){var o,i=null===(o=t[e])||void 0===o?void 0:o.toUpperCase().includes(null==n?void 0:n.toUpperCase());t.search=i,t[r]&&u(t[r])}))},a=function(t){return t.filter((function(t){var e;t[r]&&(t[r]=a(t[r]));var n=t.search||(null===(e=t[r])||void 0===e?void 0:e.length)>0;return delete t.search,n&&(null==l||l(t)),n}))};return u(t),a(t)},t.formatDate=function(t){var e=(null==t?void 0:t.sep)||"-",n=(null==t?void 0:t.showHours)||!1,o=(null==t?void 0:t.millisecond)?new Date(Number(t.millisecond)):new Date,i=o.getFullYear(),c=o.getMonth()+1,l=o.getDate(),r=o.getHours(),u=o.getMinutes(),a=o.getSeconds();return c=c>=10?c:"0"+c,l=l>=10?l:"0"+l,r=r>=10?r:"0"+r,u=u>=10?u:"0"+u,a=a>=10?a:"0"+a,n?"".concat(i+e+c+e+l," ").concat(r,":").concat(u,":").concat(a):"".concat(i+e+c+e+l)},t.formatUrlSearch=function(t){var e={},n=location.href.split("?")[1];return null==n||n.split("#")[0].split("&").forEach((function(t){e[t.split("=")[0]]=t.split("=").slice(1).join("=")})),t&&t in e?e[t]:e},t.infiniteScroll=function(t,e){var n=document.querySelector(t.el),o=t.delay||100,i=t.distance||10,c=!0;return n.onscroll=function(){if(c){var t=parseFloat(getComputedStyle(n).height),l=n.scrollHeight,r=n.scrollTop;c=!1,setTimeout((function(){c=!0}),o),l-r-t<i&&e()}},function(){n.onscroll=null}},t.matchString=function(t,e){var n=e;t.includes(n)||(n=n.toUpperCase());var o=t.split(n),i=o.length-1,c=[];return o.includes("")?o.every((function(t){return""===t}))?c=2===o.length?[""]:o.slice(1):o.length>1?o.forEach((function(t,e){t?e===i?c.push(t):c.push(t,void 0):e!==i&&c.push(void 0)})):c=o:o.forEach((function(t,e){e===i?c.push(t):c.push(t,void 0)})),{string:t,matchString:e,result:c}},t.pageAnchor=function(t){var e=(null==t?void 0:t.anchor)||0,n=(null==t?void 0:t.speed)||10,o=void 0===(null==t?void 0:t.down)||Boolean(t.down);!function t(){if(o){if(scrollY<e){var i=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.clientHeight||document.body.clientHeight,l=document.documentElement.scrollHeight||document.body.scrollHeight;l>c&&i+c<l&&(scrollTo(0,scrollY+n),requestAnimationFrame(t))}}else scrollY>e&&(scrollTo(0,scrollY-n),requestAnimationFrame(t))}()},t.slideDirection=function(t,e,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var i=0,c=0,l=0,r=0,u=0,a=0,s="string"==typeof t?document.querySelector("".concat(t)):t;if(null===s)throw new Error("".concat(t,"无法查找到元素"));null===s.ontouchstart?(s.ontouchstart=function(t){l=r=u=a=0,i=t.changedTouches[0].clientX,c=t.changedTouches[0].clientY},n&&(s.ontouchmove=function(t){u=t.changedTouches[0].clientX,a=t.changedTouches[0].clientY,e(o?{startX:i,startY:c,endX:l,endY:r}:{},{realX:u,realY:a})}),s.ontouchend=function(t){l=t.changedTouches[0].clientX,r=t.changedTouches[0].clientY,e({startX:i,startY:c,endX:l,endY:r},{realX:u,realY:a})}):(s.onmousedown=function(t){l=r=u=a=0,i=t.clientX,c=t.clientY,n&&(s.onmousemove=function(t){u=t.clientX,a=t.clientY,e(o?{startX:i,startY:c,endX:l,endY:r}:{},{realX:u,realY:a})})},document.onmouseup=function(t){null!==s.onmousemove&&(l=t.clientX,r=t.clientY,s.onmousemove=null,e({startX:i,startY:c,endX:l,endY:r},{realX:u,realY:a}))})},t.throttleFn=e}));
//# sourceMappingURL=index.js.map
