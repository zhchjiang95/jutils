!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).jutils={})}(this,(function(e){"use strict";var t=function(e,t,n){void 0===t&&(t=200),void 0===n&&(n=!1);var o=!0;return function(i){o&&(o=!1,setTimeout((function(){o=!0,n&&setTimeout((function(){o&&e(i)}),10)}),t),e(i))}};e.adaptiveScaling=function(e,t,n){var o=n[0];n[1];var i=e.clientWidth/o;t.style.transformOrigin="left top",t.style.transform="scale(".concat(i,")")},e.boxAnchor=function(e,t){var n,o=document.querySelector(e.source),i=document.querySelector(e.target),c=Array.from((null==i?void 0:i.children)||[]).filter((function(e){return"jt"===e.dataset.jtType})),l=null;o.onclick=function(t){var n="#"+(/^[.|#]/.test(e.source)?this.dataset.jtId:t.target.dataset.jtId),o=document.querySelector(n);if(o){var c=e.diff?e.diff:0,l=e.speed?e.speed:10,r=parseFloat(getComputedStyle(o).height),u=i.scrollTop>=o.offsetTop-r-c;return function e(){u?i.scrollTop>o.offsetTop-r-c&&0!==i.scrollTop&&(i.scrollTo(0,i.scrollTop-l),requestAnimationFrame(e)):o.offsetTop-r-c-i.scrollTop>l&&i.scrollTop+i.offsetHeight<i.scrollHeight-l&&(i.scrollTo(0,i.scrollTop+l),requestAnimationFrame(e))}(),!1}},"function"==typeof t&&i.addEventListener("scroll",(function(){c.map((function(e){e!==n&&(n=e,e.distance=Math.abs(e.offsetTop-i.scrollTop))}));var e=c.sort((function(e,t){return e.distance-t.distance}));l&&l[0].id===e[0].id||(l=e.slice(),t({el:e[0],jtId:e[0].id}))}))},e.canvasPathEvent=function(e,n,o,i,c){var l={index:void 0,path:void 0,e:{}},r=Array.isArray(o),u=(null==c?void 0:c.ms)||80,s=[],a=e.getContext("2d");if(a){var d=function(t,n,o){l.index=n,l.path=o,e.style.cursor=t},f=t((function(t){var u=t.offsetX,s=t.offsetY,f=t.clientX,h=t.clientY,v=t.type,p=(null==c?void 0:c.devicePixelRatio)||e.width/e.clientWidth,m=n.findIndex((function(e){return a.isPointInPath(e,u*p,s*p)}));l.e.clientX=f,l.e.clientY=h,-1!==m?r?o[0]===v?d("pointer",m,n[m]):e.style.cursor="pointer":d("pointer",m,n[m]):d("default"),i(l)}),u);(r?o:[o]).forEach((function(t){e.addEventListener(t,f),s.push((function(){e.removeEventListener(t,f)}))}))}return function(){s.forEach((function(e){e()}))}},e.debounceFn=function(e,t,n){var o,i;return void 0===t&&(t=200),function(c){void 0===i&&(i=(new Date).getTime()),(null==n?void 0:n.maxWait)&&i&&(new Date).getTime()-i>n.maxWait&&(e(c),i=void 0),clearTimeout(o),o=setTimeout((function(){e(c),i=void 0}),t)}},e.filterTree=function(e,t,n,o){var i=o||{},c=i.childrenField,l=i.callback,r=c||"children",u=function(e){e.forEach((function(e){var o,i=null===(o=e[t])||void 0===o?void 0:o.toUpperCase().includes(null==n?void 0:n.toUpperCase());e.search=i,e[r]&&u(e[r])}))},s=function(e){return e.filter((function(e){var t;e[r]&&(e[r]=s(e[r]));var n=e.search||(null===(t=e[r])||void 0===t?void 0:t.length)>0;return delete e.search,n&&(null==l||l(e)),n}))};return u(e),s(e)},e.formatDate=function(e){var t=(null==e?void 0:e.sep)||"-",n=(null==e?void 0:e.showHours)||!1,o=(null==e?void 0:e.millisecond)?new Date(Number(e.millisecond)):new Date,i=o.getFullYear(),c=o.getMonth()+1,l=o.getDate(),r=o.getHours(),u=o.getMinutes(),s=o.getSeconds();return c=c>=10?c:"0"+c,l=l>=10?l:"0"+l,r=r>=10?r:"0"+r,u=u>=10?u:"0"+u,s=s>=10?s:"0"+s,n?"".concat(i+t+c+t+l," ").concat(r,":").concat(u,":").concat(s):"".concat(i+t+c+t+l)},e.formatUrlSearch=function(e){var t={},n=location.href.split("?")[1];return null==n||n.split("#")[0].split("&").forEach((function(e){t[e.split("=")[0]]=e.split("=").slice(1).join("=")})),e&&e in t?t[e]:t},e.infiniteScroll=function(e,t){var n=document.querySelector(e.el),o=e.delay||100,i=e.distance||10,c=!0;return n.onscroll=function(){if(c){var e=parseFloat(getComputedStyle(n).height),l=n.scrollHeight,r=n.scrollTop;c=!1,setTimeout((function(){c=!0}),o),l-r-e<i&&t()}},function(){n.onscroll=null}},e.matchString=function(e,t){var n=t;e.includes(n)||(n=n.toUpperCase());var o=e.split(n),i=o.length-1,c=[];return o.includes("")?o.every((function(e){return""===e}))?c=2===o.length?[""]:o.slice(1):o.length>1?o.forEach((function(e,t){e?t===i?c.push(e):c.push(e,void 0):t!==i&&c.push(void 0)})):c=o:o.forEach((function(e,t){t===i?c.push(e):c.push(e,void 0)})),{string:e,matchString:t,result:c}},e.pageAnchor=function(e){var t=(null==e?void 0:e.anchor)||0,n=(null==e?void 0:e.speed)||10,o=void 0===(null==e?void 0:e.down)||Boolean(e.down);!function e(){if(o){if(scrollY<t){var i=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.clientHeight||document.body.clientHeight,l=document.documentElement.scrollHeight||document.body.scrollHeight;l>c&&i+c<l&&(scrollTo(0,scrollY+n),requestAnimationFrame(e))}}else scrollY>t&&(scrollTo(0,scrollY-n),requestAnimationFrame(e))}()},e.slideDirection=function(e,t,n,o){void 0===n&&(n=!1),void 0===o&&(o=!1);var i=0,c=0,l=0,r=0,u=0,s=0,a="string"==typeof e?document.querySelector("".concat(e)):e;if(null===a)throw new Error("".concat(e,"无法查找到元素"));null===a.ontouchstart?(a.ontouchstart=function(e){l=r=u=s=0,i=e.changedTouches[0].clientX,c=e.changedTouches[0].clientY},n&&(a.ontouchmove=function(e){u=e.changedTouches[0].clientX,s=e.changedTouches[0].clientY,t(o?{startX:i,startY:c,endX:l,endY:r}:{},{realX:u,realY:s})}),a.ontouchend=function(e){l=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY,t({startX:i,startY:c,endX:l,endY:r},{realX:u,realY:s})}):(a.onmousedown=function(e){l=r=u=s=0,i=e.clientX,c=e.clientY,n&&(a.onmousemove=function(e){u=e.clientX,s=e.clientY,t(o?{startX:i,startY:c,endX:l,endY:r}:{},{realX:u,realY:s})})},document.onmouseup=function(e){null!==a.onmousemove&&(l=e.clientX,r=e.clientY,a.onmousemove=null,t({startX:i,startY:c,endX:l,endY:r},{realX:u,realY:s}))})},e.throttleFn=t}));
//# sourceMappingURL=index.js.map
